{"version":3,"sources":["../node_modules/es-module-loader/core/common.js","../node_modules/es-module-loader/core/resolve.js","../node_modules/es-module-loader/core/loader-polyfill.js","../node_modules/es-module-loader/core/register-loader.js","../src/common.js","../src/fetch.js","../src/resolve.js","../src/config.js","../src/evaluate.js","../src/format-helpers.js","../src/instantiate.js","../src/systemjs-loader.js","../src/system.js"],"names":["createSymbol","name","hasSymbol","Symbol","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","isBrowser","replace","isWindows","err","message","errArgs","fileName","Error","lineNumber","stack","originalErr","isNode","throwResolveError","relUrl","parentUrl","RangeError","resolveIfNotPlain","trim","parentProtocol","substr","indexOf","firstChar","secondChar","length","pathname","parentIsPlain","undefined","segmented","lastIndexOf","output","segmentIndex","i","pop","push","substring","join","match","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","next","value","done","Loader","this","registry","Registry","ensureInstantiated","module","ModuleNamespace","TypeError","ensureResolution","resolvedKey","REGISTRY","baseObject","defineProperty","BASE_OBJECT","forEach","extendNamespace","key","enumerable","get","RegisterLoader","call","registryDelete","delete","deleted","records","hasOwnProperty","linkRecord","REGISTER_INTERNAL","lastRegister","trace","createLoadRecord","state","registration","importerSetters","loadError","evalError","instantiatePromise","dependencies","execute","executingRequire","moduleObj","setters","depsInstantiatePromise","dependencyInstantiations","instantiate","loader","load","link","Promise","resolve","then","INSTANTIATE","createProcessAnonRegister","instantiation","traceLoad","default","__useDefault","declare","definedExports","declared","global","changed","p","ContextualLoader","exports","registerDeclarative","catch","addToError","resolveInstantiateDep","parentKey","traceDepMap","loads","deps","dynamicDeps","depMap","deepInstantiateDeps","reject","queueLoad","seen","loadCnt","depsInstantiatePromises","Array","all","setter","instantiateDeps","processLoad","depLoad","id","meta","url","ensureEvaluate","doEvaluate","depLink","nullContext","e","declarativeExecute","configurable","set","require","makeDynamicRequire","dynamicExecute","moduleDefault","__esModule","noop","warn","msg","force","warnings","console","extend","a","b","prepend","extendMeta","_prepend","val","concat","preloadScript","supportsPreload","supportsPrefetch","document","createElement","rel","as","href","head","appendChild","Image","src","scriptLoad","crossOrigin","integrity","cleanup","error","loadingScripts","splice","script","removeEventListener","removeChild","isWorker","importScripts","workerImport","type","charset","async","addEventListener","readMemberExpression","pParts","split","shift","applyPaths","baseURL","paths","mapMatch","getMapMatch","target","resolved","baseURI","checkMap","curLen","len","map","bestMatch","xhrFetch","authorization","asBuffer","xhr","response","responseText","status","statusText","XMLHttpRequest","responseType","onreadystatechange","readyState","open","setRequestHeader","withCredentials","send","getParentMetadata","config","parentMetadata","pluginKey","pluginArgument","pluginModule","packageKey","packageConfig","parentPluginIndex","pluginFirst","packages","decanonicalize","parsed","parsePlugin","plugin","combinePluginParts","coreResolve","argument","normalizeSync","CONFIG","metadata","packageResolveSync","doMap","packageName","relativeResolved","has","trailingSlash","skipExtensions","parentMap","parentMapMatch","mapped","doMapSync","normalized","pkgConfigMatch","getPackageConfigMatch","packageConfigKeys","createPackage","subPath","pkg","pkgKey","main","mapPath","addDefaultExtension","applyPackageConfigSync","packageResolve","resolvedPromise","createMeta","format","configured","pkgConfigPath","configLoader","pluginLoader","import","pkgConfig","setPkgConfig","loadPackageConfigPath","configPath","applyPackageConfig","extension","globals","nonce","sourceMap","encapsulateGlobal","cjsRequireDetection","cjsDeferDepsExecute","esModule","argumentKey","pluginIndex","defaultExtension","metaMatch","getMetaMatches","metaPattern","matchMeta","matchDepth","validMapping","path","interpolateConditional","conditionPromises","conditions","c","parseCondition","condition","prototype","conditionValues","prop","negate","createPkgConfigPathObj","lastWildcard","Math","max","regEx","RegExp","wildcard","exactMatch","packageConfigPaths","packageConfigPath","pkgMeta","matchFn","wildcardIndex","dotRel","exactMeta","conditionExport","conditionModule","negation","conditionExportIndex","sysConditions","resolveCondition","conditionObj","bool","m","conditionalMatch","interpolationRegEx","conditionValue","envSet","cfg","envCallback","envConfigNames","envConfig","envModule","cloneObj","obj","maxDepth","clone","getConfigItem","cfgItem","pkgName","prependConfig","getSource","source","address","wrap","lastLineIndex","JSON","stringify","sourceMapString","hasBuffer","sourceMapPrefix","Buffer","toString","btoa","unescape","encodeURIComponent","inlineSourceMap","preExec","callCounter","curSystem","System","SystemJS","postExec","evaluate","noWrap","supportsScriptExec","body","documentElement","text","onerror","window","_e","apply","arguments","setAttribute","scriptExec","vm","_nodeRequire","useVm","runInThisContext","filename","eval","stripOrigin","windowOrigin","requireResolve","request","parentId","getPathVars","moduleId","dirname","globalIterator","globalName","ignoredGlobalProps","getGlobalValue","globalValue","prepareGlobal","moduleName","encapsulate","curDefine","define","oldGlobals","g","globalSnapshot","singleGlobal","multipleExports","wrapEsModuleExecute","setMetaEsModule","moduleValue","translateAndInstantiate","processAnonRegister","metaRegEx","metaParts","metaPartRegEx","curPart","metaString","metaName","metaValue","setMetaProperty","readMetaSyntax","pluginLoad","translate","traceOpts","translated","sanitizeSourceMap","detectRegisterFormat","esmRegEx","transpiler","depsPrefix","parse","transpile","calledInstantiate","result","bindings","protectedCreateNamespace","amdRegEx","cjsExportsRegEx","lastIndex","cjsRequireRegEx","exec","detectLegacyFormat","registered","emptyModule","newModule","amdDefine","metaDeps","curMetaDeps","curEsModule","lastNamedDefine","multipleNamedDefines","clearLastDefine","registerDynamic","registerLastDefine","inLocation","locations","index","commentRegEx","stringRegEx","stringLocations","commentLocations","dep","getCJSDeps","pathVars","__cjsWrapper","args","cjsWrapper","hashBangRegEx","gl","exportName","retrieveGlobal","leadingCommentAndMeta","leadingCommentAndMetaRegEx","originalName","file","sources","SystemJSLoader","_loader","METADATA","depCache","bundles","production","loadedBundles","wasm","scriptSrc","nodeRequire","setProduction","formatHelpers","isProduction","isBuilder","browser","node","dev","build","registryWarn","method","process","versions","platform","envGlobal","self","getElementsByTagName","bases","location","slashIndex","cwd","constructor","parent","RESOLVE_INSTANTIATE","RESOLVE","resolveInstantiate","iteratorSupport","entries","namespace","create","toStringTag","instantiated","register","freeze","hasStringTag","parentModuleContext","relList","supports","fs","hasXhr","fetch$1","fetch","opts","headers","Accept","credentials","res","ok","arrayBuffer","readFile","data","dataString","chrome","navigator","userAgent","names","callback","errback","referer","dynamicRequires","modules","factory","req","depValues","uri","moduleIndex","exportsIndex","requireIndex","contextualRequire","toUrl","curRequire","requireAlias","fnBracketRegEx","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","amdGetCJSDeps","bind","amd","amdRequire","protocol","hostname","port","supportsScriptLoad","scripts","curScript","currentScript","defer","__filename","normalize","booleanIndex","bestDepth","depth","resolveSync","matched","curModule","parts","loadBundlesAndDepCache","Module","base","decodeURI","_nodeModulePaths","initializePlugin","locate","fetched","wasmBuffer","bytes","Uint8Array","WebAssembly","compile","importObj","imports","_export","Instance","checkInstantiateWasm","wasmInstantiated","stringSource","TextDecoder","decode","runFetchPipeline","isEnvConfig","defaultJSExtensions","v","packageLength","bundle","configNames","getConfig","configName","configItem","hasProxy","Proxy","option","isModule","version"],"mappings":"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","sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  var slashIndex = baseURI.lastIndexOf('/');\n  if (slashIndex !== -1)\n    baseURI = baseURI.substr(0, slashIndex + 1);\n}\nelse if (typeof process !== 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError (relUrl, parentUrl) {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  relUrl = relUrl.trim();\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n      relUrl.length === 1  && (relUrl += '/')) ||\n      firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = -1;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== -1) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substring(segmentIndex, i + 1));\n          segmentIndex = -1;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== -1)\n      output.push(segmented.substr(segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace, REGISTRY }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { Loader, ModuleNamespace, REGISTRY } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, caching load and eval errors separately\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  var registryDelete = this.registry.delete;\n  this.registry.delete = function (key) {\n    var deleted = registryDelete.call(this, key);\n\n    // also delete from register registry if linked\n    if (records.hasOwnProperty(key) && !records[key].linkRecord) {\n      delete records[key];\n      deleted = true;\n    }\n\n    return deleted;\n  };\n\n  var records = {};\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: records\n  };\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    loadError: undefined,\n    evalError: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = this.registry[REGISTRY];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    var link = instantiated.linkRecord;\n\n    // if already beaten to done, return\n    if (!link) {\n      if (instantiated.module)\n        return instantiated.module;\n      throw instantiated.evalError;\n    }\n\n    return deepInstantiateDeps(loader, instantiated, link, registry, state)\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, link, registry, state, undefined);\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  }\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = link.moduleObj.__useDefault = {};\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    load.linkRecord = undefined;\n    throw load.loadError = load.loadError || addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = resolvedKey;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    if (load && load.loadError)\n      throw load.loadError;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    dynamicDeps: [],\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var definedExports = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    if (typeof name === 'object') {\n      var changed = false;\n      for (var p in name) {\n        value = name[p];\n        if (p !== '__useDefault' && (!(p in moduleObj) || moduleObj[p] !== value)) {\n          changed = true;\n          moduleObj[p] = value;\n        }\n      }\n      if (changed === false)\n        return value;\n    }\n    else {\n      if ((definedExports || name in moduleObj) && moduleObj[name] === value)\n        return value;\n      moduleObj[name] = value;\n    }\n\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports) {\n    link.moduleObj = moduleObj = declared.exports;\n    definedExports = true;\n  }\n}\n\nfunction instantiateDeps (loader, load, link, registry, state) {\n  if (link.depsInstantiatePromise)\n    return link.depsInstantiatePromise;\n\n  var depsInstantiatePromises = Array(link.dependencies.length);\n\n  for (var i = 0; i < link.dependencies.length; i++)\n    depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && link.depMap || (link.depMap = {}));\n\n  var depsInstantiatePromise = Promise.all(depsInstantiatePromises)\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            if (instantiation.loadError)\n              throw instantiation.loadError;\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n\n    return load;\n  });\n\n  if (loader.trace)\n    depsInstantiatePromise = depsInstantiatePromise.then(function () {\n      traceLoad(loader, load, link);\n      return load;\n    });\n\n  depsInstantiatePromise = depsInstantiatePromise.catch(function (err) {\n    // throw up the instantiateDeps stack\n    link.depsInstantiatePromise = undefined;\n    throw addToError(err, 'Loading ' + load.key);\n  });\n\n  depsInstantiatePromise.catch(function () {});\n\n  return link.depsInstantiatePromise = depsInstantiatePromise;\n}\n\nfunction deepInstantiateDeps (loader, load, link, registry, state) {\n  return new Promise(function (resolve, reject) {\n    var seen = [];\n    var loadCnt = 0;\n    function queueLoad (load) {\n      var link = load.linkRecord;\n      if (!link)\n        return;\n\n      if (seen.indexOf(load) !== -1)\n        return;\n      seen.push(load);\n\n      loadCnt++;\n      instantiateDeps(loader, load, link, registry, state)\n      .then(processLoad, reject);\n    }\n    function processLoad (load) {\n      loadCnt--;\n      var link = load.linkRecord;\n      if (link) {\n        for (var i = 0; i < link.dependencies.length; i++) {\n          var depLoad = link.dependencyInstantiations[i];\n          if (!(depLoad instanceof ModuleNamespace))\n            queueLoad(depLoad);\n        }\n      }\n      if (loadCnt === 0)\n        resolve();\n    }\n    queueLoad(load);\n  });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id, .key\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n  this.meta = {\n    url: key\n    // scriptElement: null\n  };\n}\n/*ContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};*/\nContextualLoader.prototype.import = function (key) {\n  if (this.loader.trace)\n    this.loader.loads[this.key].dynamicDeps.push(key);\n  return this.loader.import(key, this.key);\n};\n/*ContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};*/\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (load.evalError)\n    throw load.evalError;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err)\n    throw err;\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return '__useDefault' in module ? module.__useDefault : module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLoad.evalError)\n          err = depLoad.evalError;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err) {\n        load.linkRecord = undefined;\n        load.evalError = addToError(err, 'Evaluating ' + load.key);\n        return load.evalError;\n      }\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = moduleObj.__useDefault = exports;\n        },\n        get: function () {\n          return moduleObj.__useDefault;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.__useDefault)\n        moduleObj.default = moduleObj.__useDefault = module.exports;\n\n      var moduleDefault = moduleObj.default;\n\n      // __esModule flag extension support via lifting\n      if (moduleDefault && moduleDefault.__esModule) {\n        for (var p in moduleDefault) {\n          if (Object.hasOwnProperty.call(moduleDefault, p))\n            moduleObj[p] = moduleDefault[p];\n        }\n      }\n    }\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n\n  if (err)\n    return load.evalError = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","import { resolveIfNotPlain } from 'es-module-loader/core/resolve.js';\nimport { baseURI, isBrowser, isWindows, addToError, global, createSymbol } from 'es-module-loader/core/common.js';\nimport RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { ModuleNamespace } from 'es-module-loader/core/loader-polyfill.js';\n\nexport { baseURI, isBrowser, isWindows, addToError, global, resolveIfNotPlain, ModuleNamespace }\n\nexport var resolvedPromise = Promise.resolve();\nexport function noop () {};\n\nexport var emptyModule = new ModuleNamespace({});\n\nexport function protectedCreateNamespace (bindings) {\n  if (bindings instanceof ModuleNamespace)\n    return bindings;\n\n  if (bindings && bindings.__esModule)\n    return new ModuleNamespace(bindings);\n\n  return new ModuleNamespace({ default: bindings, __useDefault: bindings });\n}\n\nvar hasStringTag;\nexport function isModule (m) {\n  if (hasStringTag === undefined)\n    hasStringTag = typeof Symbol !== 'undefined' && !!Symbol.toStringTag;\n  return m instanceof ModuleNamespace || hasStringTag && Object.prototype.toString.call(m) == '[object Module]';\n}\n\nexport var CONFIG = createSymbol('loader-config');\nexport var METADATA = createSymbol('metadata');\nexport var PLAIN_RESOLVE = createSymbol('plain-resolve');\nexport var PLAIN_RESOLVE_SYNC = createSymbol('plain-resolve-sync');\n\nexport var isWorker = typeof window === 'undefined' && typeof self !== 'undefined' && typeof importScripts !== 'undefined';\n\nexport function warn (msg, force) {\n  if (force || this.warnings && typeof console !== 'undefined' && console.warn)\n    console.warn(msg);\n}\n\nexport function checkInstantiateWasm (loader, wasmBuffer, processAnonRegister) {\n  var bytes = new Uint8Array(wasmBuffer);\n\n  // detect by leading bytes\n  // Can be (new Uint32Array(fetched))[0] === 0x6D736100 when working in Node\n  if (bytes[0] === 0 && bytes[1] === 97 && bytes[2] === 115) {\n    return WebAssembly.compile(wasmBuffer).then(function (m) {\n      var deps = [];\n      var setters = [];\n      var importObj = {};\n\n      // we can only set imports if supported (eg Safari doesnt support)\n      if (WebAssembly.Module.imports)\n        WebAssembly.Module.imports(m).forEach(function (i) {\n          var key = i.module;\n          setters.push(function (m) {\n            importObj[key] = m;\n          });\n          if (deps.indexOf(key) === -1)\n            deps.push(key);\n        });\n      loader.register(deps, function (_export) {\n        return {\n          setters: setters,\n          execute: function () {\n            _export(new WebAssembly.Instance(m, importObj).exports);\n          }\n        };\n      });\n      processAnonRegister();\n\n      return true;\n    });\n  }\n\n  return Promise.resolve(false);\n}\n\nvar parentModuleContext;\nexport function loadNodeModule (key, baseURL) {\n  if (key[0] === '.')\n    throw new Error('Node module ' + key + ' can\\'t be loaded as it is not a package require.');\n\n  if (!parentModuleContext) {\n    var Module = this._nodeRequire('module');\n    var base = decodeURI(baseURL.substr(isWindows ? 8 : 7));\n    parentModuleContext = new Module(base);\n    parentModuleContext.paths = Module._nodeModulePaths(base);\n  }\n  return parentModuleContext.require(key);\n}\n\nexport function extend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    a[p] = b[p];\n  }\n  return a;\n}\n\nexport function prepend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    if (a[p] === undefined)\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nexport function extendMeta (a, b, _prepend) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    var val = b[p];\n    if (a[p] === undefined)\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(_prepend ? val : a[p]).concat(_prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = (_prepend ? prepend : extend)(extend({}, a[p]), val);\n    else if (!_prepend)\n      a[p] = val;\n  }\n}\n\nvar supportsPreload = false, supportsPrefetch = false;\nif (isBrowser)\n  (function () {\n    var relList = document.createElement('link').relList;\n    if (relList && relList.supports) {\n      supportsPrefetch = true;\n      try {\n        supportsPreload = relList.supports('preload');\n      }\n      catch (e) {}\n    }\n  })();\n\nexport function preloadScript (url) {\n  // fallback to old fashioned image technique which still works in safari\n  if (!supportsPreload && !supportsPrefetch) {\n    var preloadImage = new Image();\n    preloadImage.src = url;\n    return;\n  }\n\n  var link = document.createElement('link');\n  if (supportsPreload) {\n    link.rel = 'preload';\n    link.as = 'script';\n  }\n  else {\n    // this works for all except Safari (detected by relList.supports lacking)\n    link.rel = 'prefetch';\n  }\n  link.href = url;\n  document.head.appendChild(link);\n}\n\nfunction workerImport (src, resolve, reject) {\n  try {\n    importScripts(src);\n  }\n  catch (e) {\n    reject(e);\n  }\n  resolve();\n}\n\nif (isBrowser) {\n  var loadingScripts = [];\n  var onerror = window.onerror;\n  window.onerror = function globalOnerror (msg, src) {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].src !== src)\n        continue;\n      loadingScripts[i].err(msg);\n      return;\n    }\n    if (onerror)\n      onerror.apply(this, arguments);\n  };\n}\n\nexport function scriptLoad (src, crossOrigin, integrity, resolve, reject) {\n  // percent encode just \"#\" for HTTP requests\n  src = src.replace(/#/g, '%23');\n\n  // subresource integrity is not supported in web workers\n  if (isWorker)\n    return workerImport(src, resolve, reject);\n\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.charset = 'utf-8';\n  script.async = true;\n\n  if (crossOrigin)\n    script.crossOrigin = crossOrigin;\n  if (integrity)\n    script.integrity = integrity;\n\n  script.addEventListener('load', load, false);\n  script.addEventListener('error', error, false);\n\n  script.src = src;\n  document.head.appendChild(script);\n\n  function load () {\n    resolve();\n    cleanup();\n  }\n\n  // note this does not catch execution errors\n  function error (err) {\n    cleanup();\n    reject(new Error('Fetching ' + src));\n  }\n\n  function cleanup () {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].err === error) {\n        loadingScripts.splice(i, 1);\n        break;\n      }\n    }\n    script.removeEventListener('load', load, false);\n    script.removeEventListener('error', error, false);\n    document.head.removeChild(script);\n  }\n}\n\nexport function readMemberExpression (p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\n// separate out paths cache as a baseURL lock process\nexport function applyPaths (baseURL, paths, key) {\n  var mapMatch = getMapMatch(paths, key);\n  if (mapMatch) {\n    var target = paths[mapMatch] + key.substr(mapMatch.length);\n\n    var resolved = resolveIfNotPlain(target, baseURI);\n    if (resolved !== undefined)\n      return resolved;\n\n    return baseURL + target;\n  }\n  else if (key.indexOf(':') !== -1) {\n    return key;\n  }\n  else {\n    return baseURL + key;\n  }\n}\n\nfunction checkMap (p) {\n  var name = this.name;\n  // can add ':' here if we want paths to match the behaviour of map\n  if (name.substr(0, p.length) === p && (name.length === p.length || name[p.length] === '/' || p[p.length - 1] === '/' || p[p.length - 1] === ':')) {\n    var curLen = p.split('/').length;\n    if (curLen > this.len) {\n      this.match = p;\n      this.len = curLen;\n    }\n  }\n}\n\nexport function getMapMatch (map, name) {\n  if (Object.hasOwnProperty.call(map, name))\n    return name;\n\n  var bestMatch = {\n    name: name,\n    match: undefined,\n    len: 0\n  };\n\n  Object.keys(map).forEach(checkMap, bestMatch);\n\n  return bestMatch.match;\n}\n\n// RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\nexport var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'|`[^`\\\\]*(?:\\\\.[^`\\\\]*)*`)\\s*\\)/g\n","import { isWindows } from './common.js';\n\n/*\n * Source loading\n */\nfunction fetchFetch (url, authorization, integrity, asBuffer) {\n  // fetch doesn't support file:/// urls\n  if (url.substr(0, 8) === 'file:///') {\n    if (hasXhr)\n      return xhrFetch(url, authorization, integrity, asBuffer);\n    else\n      throw new Error('Unable to fetch file URLs in this environment.');\n  }\n\n  // percent encode just \"#\" for HTTP requests\n  url = url.replace(/#/g, '%23');\n\n  var opts = {\n    // NB deprecate\n    headers: { Accept: 'application/x-es-module, */*' }\n  };\n\n  if (integrity)\n    opts.integrity = integrity;\n\n  if (authorization) {\n    if (typeof authorization == 'string')\n      opts.headers['Authorization'] = authorization;\n    opts.credentials = 'include';\n  }\n\n  return fetch(url, opts)\n  .then(function(res) {\n    if (res.ok)\n      return asBuffer ? res.arrayBuffer() : res.text();\n    else\n      throw new Error('Fetch error: ' + res.status + ' ' + res.statusText);\n  });\n}\n\nfunction xhrFetch (url, authorization, integrity, asBuffer) {\n  return new Promise(function (resolve, reject) {\n    // percent encode just \"#\" for HTTP requests\n    url = url.replace(/#/g, '%23');\n\n    var xhr = new XMLHttpRequest();\n    if (asBuffer)\n      xhr.responseType = 'arraybuffer';\n    function load() {\n      resolve(asBuffer ? xhr.response : xhr.responseText);\n    }\n    function error() {\n      reject(new Error('XHR error: ' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        // in Chrome on file:/// URLs, status is 0\n        if (xhr.status == 0) {\n          if (xhr.response) {\n            load();\n          }\n          else {\n            // when responseText is empty, wait for load or error event\n            // to inform if it is a 404 or empty file\n            xhr.addEventListener('error', error);\n            xhr.addEventListener('load', load);\n          }\n        }\n        else if (xhr.status === 200) {\n          load();\n        }\n        else {\n          error();\n        }\n      }\n    };\n    xhr.open(\"GET\", url, true);\n\n    if (xhr.setRequestHeader) {\n      xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n      // can set \"authorization: true\" to enable withCredentials only\n      if (authorization) {\n        if (typeof authorization == 'string')\n          xhr.setRequestHeader('Authorization', authorization);\n        xhr.withCredentials = true;\n      }\n    }\n\n    xhr.send(null);\n  });\n}\n\nvar fs;\nfunction nodeFetch (url, authorization, integrity, asBuffer) {\n  if (url.substr(0, 8) != 'file:///')\n    return Promise.reject(new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// supported running in Node.'));\n\n  fs = fs || require('fs');\n  if (isWindows)\n    url = url.replace(/\\//g, '\\\\').substr(8);\n  else\n    url = url.substr(7);\n\n  return new Promise(function (resolve, reject) {\n    fs.readFile(url, function(err, data) {\n      if (err) {\n        return reject(err);\n      }\n      else {\n        if (asBuffer) {\n          resolve(data);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          resolve(dataString);\n        }\n      }\n    });\n  });\n}\n\nfunction noFetch () {\n  throw new Error('No fetch method is defined for this environment.');\n}\n\nvar fetchFunction;\n\nvar hasXhr = typeof XMLHttpRequest !== 'undefined';\n\nif (typeof self !== 'undefined' && typeof self.fetch !== 'undefined')\n fetchFunction = fetchFetch;\nelse if (hasXhr)\n  fetchFunction = xhrFetch;\nelse if (typeof require !== 'undefined' && typeof process !== 'undefined')\n  fetchFunction = nodeFetch;\nelse\n  fetchFunction = noFetch;\n\nexport default fetchFunction;\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { getMapMatch, readMemberExpression, extendMeta, addToError, resolveIfNotPlain,\n    baseURI, CONFIG, METADATA, applyPaths, resolvedPromise, getPackage } from './common.js';\nimport { setPkgConfig, createPackage } from './config.js';\nimport fetch from './fetch.js';\n\nexport function createMetadata () {\n  return {\n    pluginKey: undefined,\n    pluginArgument: undefined,\n    pluginModule: undefined,\n    packageKey: undefined,\n    packageConfig: undefined,\n    load: undefined\n  };\n}\n\nfunction getCoreParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n  }\n\n  return parentMetadata;\n}\n\nfunction getParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n\n    // detect parent package\n    parentMetadata.packageKey = getMapMatch(config.packages, parentKey);\n    if (parentMetadata.packageKey)\n      parentMetadata.packageConfig = config.packages[parentMetadata.packageKey];\n  }\n\n  return parentMetadata;\n}\n\nexport function normalize (key, parentKey) {\n  var config = this[CONFIG];\n\n  var metadata = createMetadata();\n  var parentMetadata = getParentMetadata(this, config, parentKey);\n\n  var loader = this;\n\n  return Promise.resolve()\n\n  // boolean conditional\n  .then(function () {\n    // first we normalize the conditional\n    var booleanIndex = key.lastIndexOf('#?');\n\n    if (booleanIndex === -1)\n      return Promise.resolve(key);\n\n    var conditionObj = parseCondition.call(loader, key.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    /*if (this.builder)\n      return this.resolve(conditionObj.module, parentKey)\n      .then(function (conditionModule) {\n        conditionObj.module = conditionModule;\n        return key.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });*/\n\n    return resolveCondition.call(loader, conditionObj, parentKey, true)\n    .then(function (conditionValue) {\n      return conditionValue ? key.substr(0, booleanIndex) : '@empty';\n    });\n  })\n\n  // plugin\n  .then(function (key) {\n    var parsed = parsePlugin(config.pluginFirst, key);\n\n    if (!parsed)\n      return packageResolve.call(loader, config, key, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, false);\n\n    metadata.pluginKey = parsed.plugin;\n\n    return Promise.all([\n      packageResolve.call(loader, config, parsed.argument, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, true),\n      loader.resolve(parsed.plugin, parentKey)\n    ])\n    .then(function (normalized) {\n      metadata.pluginArgument = normalized[0];\n      metadata.pluginKey = normalized[1];\n\n      // don't allow a plugin to load itself\n      if (metadata.pluginArgument === metadata.pluginKey)\n        throw new Error('Plugin ' + metadata.pluginArgument + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');\n\n      return combinePluginParts(config.pluginFirst, normalized[0], normalized[1]);\n    });\n  })\n  .then(function (normalized) {\n    return interpolateConditional.call(loader, normalized, parentKey, parentMetadata);\n  })\n  .then(function (normalized) {\n    setMeta.call(loader, config, normalized, metadata);\n\n    if (metadata.pluginKey || !metadata.load.loader)\n      return normalized;\n\n    // loader by configuration\n    // normalizes to parent to support package loaders\n    return loader.resolve(metadata.load.loader, normalized)\n    .then(function (pluginKey) {\n      metadata.pluginKey = pluginKey;\n      metadata.pluginArgument = normalized;\n      return normalized;\n    });\n  })\n  .then(function (normalized) {\n    loader[METADATA][normalized] = metadata;\n    return normalized;\n  });\n}\n\n// normalization function used for registry keys\n// just does coreResolve without map\nexport function decanonicalize (config, key) {\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    var pluginKey = decanonicalize.call(this, config, parsed.plugin);\n    return combinePluginParts(config.pluginFirst, coreResolve.call(this, config, parsed.argument, undefined, false, false), pluginKey);\n  }\n\n  return coreResolve.call(this, config, key, undefined, false, false);\n}\n\nexport function normalizeSync (key, parentKey) {\n  var config = this[CONFIG];\n\n  // normalizeSync is metadataless, so create metadata\n  var metadata = createMetadata();\n  var parentMetadata = parentMetadata || getParentMetadata(this, config, parentKey);\n\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    metadata.pluginKey = normalizeSync.call(this, parsed.plugin, parentKey);\n    return combinePluginParts(config.pluginFirst,\n        packageResolveSync.call(this, config, parsed.argument, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey),\n        metadata.pluginKey);\n  }\n\n  return packageResolveSync.call(this, config, key, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey);\n}\n\nexport function coreResolve (config, key, parentKey, doMap, packageName) {\n  var relativeResolved = resolveIfNotPlain(key, parentKey || baseURI);\n\n  // standard URL resolution\n  if (relativeResolved)\n    return applyPaths(config.baseURL, config.paths, relativeResolved);\n\n  // plain keys not starting with './', 'x://' and '/' go through custom resolution\n  if (doMap) {\n    var mapMatch = getMapMatch(config.map, key);\n\n    if (mapMatch) {\n      key = config.map[mapMatch] + key.substr(mapMatch.length);\n\n      relativeResolved = resolveIfNotPlain(key, baseURI);\n      if (relativeResolved)\n        return applyPaths(config.baseURL, config.paths, relativeResolved);\n    }\n  }\n\n  if (this.registry.has(key))\n    return key;\n\n  if (key.substr(0, 6) === '@node/')\n    return key;\n\n  var trailingSlash = packageName && key[key.length - 1] !== '/';\n  var resolved = applyPaths(config.baseURL, config.paths, trailingSlash ? key + '/' : key);\n  if (trailingSlash)\n    return resolved.substr(0, resolved.length - 1);\n  return resolved;\n}\n\nfunction packageResolveSync (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  // ignore . since internal maps handled by standard package resolution\n  if (parentMetadata && parentMetadata.packageConfig && key[0] !== '.') {\n    var parentMap = parentMetadata.packageConfig.map;\n    var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n    if (parentMapMatch && typeof parentMap[parentMapMatch] === 'string') {\n      var mapped = doMapSync(this, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  var normalized = coreResolve.call(this, config, key, parentKey, true, true);\n\n  var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n  metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n  if (!metadata.packageKey)\n    return normalized;\n\n  if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n    metadata.packageKey = undefined;\n    return normalized;\n  }\n\n  metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n  var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n  return applyPackageConfigSync(this, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n}\n\nfunction packageResolve (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  var loader = this;\n\n  return resolvedPromise\n  .then(function () {\n    // ignore . since internal maps handled by standard package resolution\n    if (parentMetadata && parentMetadata.packageConfig && key.substr(0, 2) !== './') {\n      var parentMap = parentMetadata.packageConfig.map;\n      var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n      if (parentMapMatch)\n        return doMap(loader, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n    }\n\n    return resolvedPromise;\n  })\n  .then(function (mapped) {\n    if (mapped)\n      return mapped;\n\n    // apply map, core, paths, contextual package map\n    var normalized = coreResolve.call(loader, config, key, parentKey, true, true);\n\n    var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n    metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n    if (!metadata.packageKey)\n      return Promise.resolve(normalized);\n\n    if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n      metadata.packageKey = undefined;\n      metadata.load = createMeta();\n      metadata.load.format = 'json';\n      // ensure no loader\n      metadata.load.loader = '';\n      return Promise.resolve(normalized);\n    }\n\n    metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n    // load configuration when it matches packageConfigPaths, not already configured, and not the config itself\n    var loadConfig = pkgConfigMatch && !metadata.packageConfig.configured;\n\n    return (loadConfig ? loadPackageConfigPath(loader, config, pkgConfigMatch.configPath, metadata) : resolvedPromise)\n    .then(function () {\n      var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n      return applyPackageConfig(loader, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n    });\n  });\n}\n\nfunction createMeta () {\n  return {\n    extension: '',\n    deps: undefined,\n    format: undefined,\n    loader: undefined,\n    scriptLoad: undefined,\n    globals: undefined,\n    nonce: undefined,\n    integrity: undefined,\n    sourceMap: undefined,\n    exports: undefined,\n    encapsulateGlobal: false,\n    crossOrigin: undefined,\n    cjsRequireDetection: true,\n    cjsDeferDepsExecute: false,\n    esModule: false\n  };\n}\n\nfunction setMeta (config, key, metadata) {\n  metadata.load = metadata.load || createMeta();\n\n  // apply wildcard metas\n  var bestDepth = 0;\n  var wildcardIndex;\n  for (var module in config.meta) {\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n    if (module.substr(0, wildcardIndex) === key.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === key.substr(key.length - module.length + wildcardIndex + 1)) {\n      var depth = module.split('/').length;\n      if (depth > bestDepth)\n        bestDepth = depth;\n      extendMeta(metadata.load, config.meta[module], bestDepth !== depth);\n    }\n  }\n\n  // apply exact meta\n  if (config.meta[key])\n    extendMeta(metadata.load, config.meta[key], false);\n\n  // apply package meta\n  if (metadata.packageKey) {\n    var subPath = key.substr(metadata.packageKey.length + 1);\n\n    var meta = {};\n    if (metadata.packageConfig.meta) {\n      var bestDepth = 0;\n      getMetaMatches(metadata.packageConfig.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n        if (matchDepth > bestDepth)\n          bestDepth = matchDepth;\n        extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n      });\n\n      extendMeta(metadata.load, meta, false);\n    }\n\n    // format\n    if (metadata.packageConfig.format && !metadata.pluginKey && !metadata.load.loader)\n      metadata.load.format = metadata.load.format || metadata.packageConfig.format;\n  }\n}\n\nfunction parsePlugin (pluginFirst, key) {\n  var argumentKey;\n  var pluginKey;\n\n  var pluginIndex = pluginFirst ? key.indexOf('!') : key.lastIndexOf('!');\n\n  if (pluginIndex === -1)\n    return;\n\n  if (pluginFirst) {\n    argumentKey = key.substr(pluginIndex + 1);\n    pluginKey = key.substr(0, pluginIndex);\n  }\n  else {\n    argumentKey = key.substr(0, pluginIndex);\n    pluginKey = key.substr(pluginIndex + 1) || argumentKey.substr(argumentKey.lastIndexOf('.') + 1);\n  }\n\n  return {\n    argument: argumentKey,\n    plugin: pluginKey\n  };\n}\n\n// put key back together after parts have been normalized\nfunction combinePluginParts (pluginFirst, argumentKey, pluginKey) {\n  if (pluginFirst)\n    return pluginKey + '!' + argumentKey;\n  else\n    return argumentKey + '!' + pluginKey;\n}\n\n/*\n * Package Configuration Extension\n *\n * Example:\n *\n * SystemJS.packages = {\n *   jquery: {\n *     main: 'index.js', // when not set, package key is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js',\n *          './custom-condition.js|~export': './index-custom.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module keys relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['external-dep'],\n *       'external-dep/path.js': ['./another.js']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n\n * - if a meta value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n * - map targets support conditional interpolation ('./x': './x.#{|env}.js')\n * - internal package map targets cannot use boolean conditionals\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package key to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   SystemJS.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   SystemJS.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package key itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * The most specific package config path will be used.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n\nfunction addDefaultExtension (config, pkg, pkgKey, subPath, skipExtensions) {\n  // don't apply extensions to folders or if defaultExtension = false\n  if (!subPath || !pkg.defaultExtension || subPath[subPath.length - 1] === '/' || skipExtensions)\n    return subPath;\n\n  var metaMatch = false;\n\n  // exact meta or meta with any content after the last wildcard skips extension\n  if (pkg.meta)\n    getMetaMatches(pkg.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  // exact global meta or meta with any content after the last wildcard skips extension\n  if (!metaMatch && config.meta)\n    getMetaMatches(config.meta, pkgKey + '/' + subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  if (metaMatch)\n    return subPath;\n\n  // work out what the defaultExtension is and add if not there already\n  var defaultExtension = '.' + pkg.defaultExtension;\n  if (subPath.substr(subPath.length - defaultExtension.length) !== defaultExtension)\n    return subPath + defaultExtension;\n  else\n    return subPath;\n}\n\nfunction applyPackageConfigSync (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    else\n      // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return pkgKey;\n  }\n\n  // map config checking without then with extensions\n  if (pkg.map) {\n    var mapPath = './' + subPath;\n\n    var mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n    if (mapMatch) {\n      var mapped = doMapSync(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  // normal package resolution\n  return pkgKey + '/' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n}\n\nfunction validMapping (mapMatch, mapped, path) {\n  // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps\n  // but only if the path is exactly ./x and not ./x/z\n  if (mapped.substr(0, mapMatch.length) === mapMatch && path.length > mapMatch.length)\n    return false;\n\n  return true;\n}\n\nfunction doMapSync (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'object')\n    throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgKey);\n\n  if (!validMapping(mapMatch, mapped, path) || typeof mapped !== 'string')\n    return;\n\n  return packageResolveSync.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions);\n}\n\nfunction applyPackageConfig (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n    else\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return Promise.resolve(pkgKey);\n  }\n\n  // map config checking without then with extensions\n  var mapPath, mapMatch;\n\n  if (pkg.map) {\n    mapPath = './' + subPath;\n    mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n  }\n\n  return (mapMatch ? doMap(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions) : resolvedPromise)\n  .then(function (mapped) {\n    if (mapped)\n      return Promise.resolve(mapped);\n\n    // normal package resolution / fallback resolution for no conditional match\n    return Promise.resolve(pkgKey + '/' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions));\n  });\n}\n\nfunction doMap (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'string') {\n    if (!validMapping(mapMatch, mapped, path))\n      return resolvedPromise;\n    return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n    .then(function (normalized) {\n      return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n    });\n  }\n\n  // we use a special conditional syntax to allow the builder to handle conditional branch points further\n  /*if (loader.builder)\n    return Promise.resolve(pkgKey + '/#:' + path);*/\n\n  // we load all conditions upfront\n  var conditionPromises = [];\n  var conditions = [];\n  for (var e in mapped) {\n    var c = parseCondition(e);\n    conditions.push({\n      condition: c,\n      map: mapped[e]\n    });\n    conditionPromises.push(RegisterLoader.prototype.import.call(loader, c.module, pkgKey));\n  }\n\n  // map object -> conditional map\n  return Promise.all(conditionPromises)\n  .then(function (conditionValues) {\n    // first map condition to match is used\n    for (var i = 0; i < conditions.length; i++) {\n      var c = conditions[i].condition;\n      var value = readMemberExpression(c.prop, '__useDefault' in conditionValues[i] ? conditionValues[i].__useDefault : conditionValues[i]);\n      if (!c.negate && value || c.negate && !value)\n        return conditions[i].map;\n    }\n  })\n  .then(function (mapped) {\n    if (mapped) {\n      if (!validMapping(mapMatch, mapped, path))\n        return resolvedPromise;\n      return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n      .then(function (normalized) {\n        return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n      });\n    }\n\n    // no environment match -> fallback to original subPath by returning undefined\n  });\n}\n\n// check if the given normalized key matches a packageConfigPath\n// if so, loads the config\nvar packageConfigPaths = {};\n\n// data object for quick checks against package paths\nfunction createPkgConfigPathObj (path) {\n  var lastWildcard = path.lastIndexOf('*');\n  var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));\n  return {\n    length: length,\n    regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/\\*/g, '[^\\\\/]+') + ')(\\\\/|$)'),\n    wildcard: lastWildcard !== -1\n  };\n}\n\n// most specific match wins\nfunction getPackageConfigMatch (config, normalized) {\n  var pkgKey, exactMatch = false, configPath;\n  for (var i = 0; i < config.packageConfigPaths.length; i++) {\n    var packageConfigPath = config.packageConfigPaths[i];\n    var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));\n    if (normalized.length < p.length)\n      continue;\n    var match = normalized.match(p.regEx);\n    if (match && (!pkgKey || (!(exactMatch && p.wildcard) && pkgKey.length < match[1].length))) {\n      pkgKey = match[1];\n      exactMatch = !p.wildcard;\n      configPath = pkgKey + packageConfigPath.substr(p.length);\n    }\n  }\n\n  if (!pkgKey)\n    return;\n\n  return {\n    packageKey: pkgKey,\n    configPath: configPath\n  };\n}\n\nfunction loadPackageConfigPath (loader, config, pkgConfigPath, metadata, normalized) {\n  var configLoader = loader.pluginLoader || loader;\n\n  // ensure we note this is a package config file path\n  // it will then be skipped from getting other normalizations itself to ensure idempotency\n  if (config.packageConfigKeys.indexOf(pkgConfigPath) === -1)\n    config.packageConfigKeys.push(pkgConfigPath);\n\n  return configLoader.import(pkgConfigPath)\n  .then(function (pkgConfig) {\n    setPkgConfig(metadata.packageConfig, pkgConfig, metadata.packageKey, true, config);\n    metadata.packageConfig.configured = true;\n  })\n  .catch(function (err) {\n    throw addToError(err, 'Unable to fetch package configuration file ' + pkgConfigPath);\n  });\n}\n\nfunction getMetaMatches (pkgMeta, subPath, matchFn) {\n  // wildcard meta\n  var wildcardIndex;\n  for (var module in pkgMeta) {\n    // allow meta to start with ./ for flexibility\n    var dotRel = module.substr(0, 2) === './' ? './' : '';\n    if (dotRel)\n      module = module.substr(2);\n\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n\n    if (module.substr(0, wildcardIndex) === subPath.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n      // alow match function to return true for an exit path\n      if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))\n        return;\n    }\n  }\n  // exact meta\n  var exactMeta = pkgMeta[subPath] && Object.hasOwnProperty.call(pkgMeta, subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];\n  if (exactMeta)\n    matchFn(exactMeta, exactMeta, 0);\n}\n\n\n/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `SystemJS.import('browser')` and\n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n *\n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n *\n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *\n *     import 'es5-shim#?./conditions.js|~es6'\n *\n */\n\nvar sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];\n\nfunction parseCondition (condition) {\n  var conditionExport, conditionModule, negation;\n\n  var negation;\n  var conditionExportIndex = condition.lastIndexOf('|');\n  if (conditionExportIndex !== -1) {\n    conditionExport = condition.substr(conditionExportIndex + 1);\n    conditionModule = condition.substr(0, conditionExportIndex);\n\n    if (conditionExport[0] === '~') {\n      negation = true;\n      conditionExport = conditionExport.substr(1);\n    }\n  }\n  else {\n    negation = condition[0] === '~';\n    conditionExport = 'default';\n    conditionModule = condition.substr(negation);\n    if (sysConditions.indexOf(conditionModule) !== -1) {\n      conditionExport = conditionModule;\n      conditionModule = null;\n    }\n  }\n\n  return {\n    module: conditionModule || '@system-env',\n    prop: conditionExport,\n    negate: negation\n  };\n}\n\nfunction resolveCondition (conditionObj, parentKey, bool) {\n  // import without __useDefault handling here\n  return RegisterLoader.prototype.import.call(this, conditionObj.module, parentKey)\n  .then(function (condition) {\n    var m = readMemberExpression(conditionObj.prop, condition);\n\n    if (bool && typeof m !== 'boolean')\n      throw new TypeError('Condition did not resolve to a boolean.');\n\n    return conditionObj.negate ? !m : m;\n  });\n}\n\nvar interpolationRegEx = /#\\{[^\\}]+\\}/;\nfunction interpolateConditional (key, parentKey, parentMetadata) {\n  // first we normalize the conditional\n  var conditionalMatch = key.match(interpolationRegEx);\n\n  if (!conditionalMatch)\n    return Promise.resolve(key);\n\n  var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n  // in builds, return normalized conditional\n  /*if (this.builder)\n    return this.normalize(conditionObj.module, parentKey, createMetadata(), parentMetadata)\n    .then(function (conditionModule) {\n      conditionObj.module = conditionModule;\n      return key.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n    });*/\n\n  return resolveCondition.call(this, conditionObj, parentKey, false)\n  .then(function (conditionValue) {\n    if (typeof conditionValue !== 'string')\n      throw new TypeError('The condition value for ' + key + ' doesn\\'t resolve to a string.');\n\n    if (conditionValue.indexOf('/') !== -1)\n      throw new TypeError('Unabled to interpolate conditional ' + key + (parentKey ? ' in ' + parentKey : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n    return key.replace(interpolationRegEx, conditionValue);\n  });\n}\n","import { envModule, setProduction, configNames } from './systemjs-loader.js';\nimport { extend, prepend, warn, resolveIfNotPlain, baseURI, CONFIG } from './common.js';\nimport { coreResolve } from './resolve.js';\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  SystemJS.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  SystemJS.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nvar envConfigNames = ['browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'];\nfunction envSet(loader, cfg, envCallback) {\n  for (var i = 0; i < envConfigNames.length; i++) {\n    var envConfig = envConfigNames[i];\n    if (cfg[envConfig] && envModule[envConfig.substr(0, envConfig.length - 6)])\n      envCallback(cfg[envConfig]);\n  }\n}\n\nfunction cloneObj (obj, maxDepth) {\n  var clone = {};\n  for (var p in obj) {\n    var prop = obj[p];\n    if (maxDepth > 1) {\n      if (prop instanceof Array)\n        clone[p] = [].concat(prop);\n      else if (typeof prop === 'object')\n        clone[p] = cloneObj(prop, maxDepth - 1);\n      else if (p !== 'packageConfig')\n        clone[p] = prop;\n    }\n    else {\n      clone[p] = prop;\n    }\n  }\n  return clone;\n}\n\nexport function getConfigItem (config, p) {\n  var cfgItem = config[p];\n\n  // getConfig must return an unmodifiable clone of the configuration\n  if (cfgItem instanceof Array)\n    return config[p].concat([]);\n  else if (typeof cfgItem === 'object')\n    return cloneObj(cfgItem, 3)\n  else\n    return config[p];\n}\n\nexport function getConfig (configName) {\n  if (configName) {\n    if (configNames.indexOf(configName) !== -1)\n      return getConfigItem(this[CONFIG], configName);\n    throw new Error('\"' + configName + '\" is not a valid configuration name. Must be one of ' + configNames.join(', ') + '.');\n  }\n\n  var cfg = {};\n  for (var i = 0; i < configNames.length; i++) {\n    var p = configNames[i];\n    var configItem = getConfigItem(this[CONFIG], p);\n    if (configItem !== undefined)\n      cfg[p] = configItem;\n  }\n  return cfg;\n}\n\nexport function setConfig (cfg, isEnvConfig) {\n  var loader = this;\n  var config = this[CONFIG];\n\n  if ('warnings' in cfg)\n    config.warnings = cfg.warnings;\n\n  if ('wasm' in cfg)\n    config.wasm = typeof WebAssembly !== 'undefined' && cfg.wasm;\n\n  if ('production' in cfg || 'build' in cfg)\n    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));\n\n  if (!isEnvConfig) {\n    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there\n    // these exceptions will be unnecessary when we can properly implement config queuings\n    var baseURL;\n    envSet(loader, cfg, function(cfg) {\n      baseURL = baseURL || cfg.baseURL;\n    });\n    baseURL = baseURL || cfg.baseURL;\n\n    // always configure baseURL first\n    if (baseURL) {\n      config.baseURL = resolveIfNotPlain(baseURL, baseURI) || resolveIfNotPlain('./' + baseURL, baseURI);\n      if (config.baseURL[config.baseURL.length - 1] !== '/')\n        config.baseURL += '/';\n    }\n\n    if (cfg.paths)\n      extend(config.paths, cfg.paths);\n\n    envSet(loader, cfg, function(cfg) {\n      if (cfg.paths)\n        extend(config.paths, cfg.paths);\n    });\n\n    for (var p in config.paths) {\n      if (config.paths[p].indexOf('*') === -1)\n        continue;\n      warn.call(config, 'Path config ' + p + ' -> ' + config.paths[p] + ' is no longer supported as wildcards are deprecated.');\n      delete config.paths[p];\n    }\n  }\n\n  if (cfg.defaultJSExtensions)\n    warn.call(config, 'The defaultJSExtensions configuration option is deprecated.\\n  Use packages defaultExtension instead.', true);\n\n  if (typeof cfg.pluginFirst === 'boolean')\n    config.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.map) {\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      if (typeof v === 'string') {\n        var mapped = coreResolve.call(loader, config, v, undefined, false, false);\n        if (mapped[mapped.length -1] === '/' && p[p.length - 1] !== ':' && p[p.length - 1] !== '/')\n          mapped = mapped.substr(0, mapped.length - 1);\n        config.map[p] = mapped;\n      }\n\n      // object map\n      else {\n        var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n        pkgName = pkgName.substr(0, pkgName.length - 1);\n\n        var pkg = config.packages[pkgName];\n        if (!pkg) {\n          pkg = config.packages[pkgName] = createPackage();\n          // use '' instead of false to keep type consistent\n          pkg.defaultExtension = '';\n        }\n        setPkgConfig(pkg, { map: v }, pkgName, false, config);\n      }\n    }\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var normalized = coreResolve.call(loader, config, path.substr(0, packageLength), undefined, false, false);\n      packageConfigPaths[i] = normalized + path.substr(packageLength);\n    }\n    config.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++)\n        bundle.push(loader.normalizeSync(cfg.bundles[p][i]));\n      config.bundles[p] = bundle;\n    }\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n      pkgName = pkgName.substr(0, pkgName.length - 1);\n\n      setPkgConfig(config.packages[pkgName] = config.packages[pkgName] || createPackage(), cfg.packages[p], pkgName, false, config);\n    }\n  }\n\n  if (cfg.depCache) {\n    for (var p in cfg.depCache)\n      config.depCache[loader.normalizeSync(p)] = [].concat(cfg.depCache[p]);\n  }\n\n  if (cfg.meta) {\n    for (var p in cfg.meta) {\n      // base wildcard stays base\n      if (p[0] === '*') {\n        extend(config.meta[p] = config.meta[p] || {}, cfg.meta[p]);\n      }\n      else {\n        var resolved = coreResolve.call(loader, config, p, undefined, true, true);\n        extend(config.meta[resolved] = config.meta[resolved] || {}, cfg.meta[p]);\n      }\n    }\n  }\n\n  if ('transpiler' in cfg)\n    config.transpiler = cfg.transpiler;\n\n\n  // copy any remaining non-standard configuration properties\n  for (var c in cfg) {\n    if (configNames.indexOf(c) !== -1)\n      continue;\n    if (envConfigNames.indexOf(c) !== -1)\n      continue;\n\n    // warn.call(config, 'Setting custom config option `System.config({ ' + c + ': ... })` is deprecated. Avoid custom config options or set SystemJS.' + c + ' = ... directly.');\n    loader[c] = cfg[c];\n  }\n\n  envSet(loader, cfg, function(cfg) {\n    loader.config(cfg, true);\n  });\n}\n\nexport function createPackage () {\n  return {\n    defaultExtension: undefined,\n    main: undefined,\n    format: undefined,\n    meta: undefined,\n    map: undefined,\n    packageConfig: undefined,\n    configured: false\n  };\n}\n\n// deeply-merge (to first level) config with any existing package config\nexport function setPkgConfig (pkg, cfg, pkgName, prependConfig, config) {\n  for (var prop in cfg) {\n    if (prop === 'main' || prop === 'format' || prop === 'defaultExtension' || prop === 'configured') {\n      if (!prependConfig || pkg[prop] === undefined)\n        pkg[prop] = cfg[prop];\n    }\n    else if (prop === 'map') {\n      (prependConfig ? prepend : extend)(pkg.map = pkg.map || {}, cfg.map);\n    }\n    else if (prop === 'meta') {\n      (prependConfig ? prepend : extend)(pkg.meta = pkg.meta || {}, cfg.meta);\n    }\n    else if (Object.hasOwnProperty.call(cfg, prop)) {\n      warn.call(config, '\"' + prop + '\" is not a valid package configuration option in package ' + pkgName);\n    }\n  }\n\n  // default defaultExtension for packages only\n  if (pkg.defaultExtension === undefined)\n    pkg.defaultExtension = 'js';\n\n  if (pkg.main === undefined && pkg.map && pkg.map['.']) {\n    pkg.main = pkg.map['.'];\n    delete pkg.map['.'];\n  }\n  // main object becomes main map\n  else if (typeof pkg.main === 'object') {\n    pkg.map = pkg.map || {};\n    pkg.map['./@main'] = pkg.main;\n    pkg.main['default'] = pkg.main['default'] || './';\n    pkg.main = '@main';\n  }\n\n  return pkg;\n}\n","import { isBrowser, global } from './common.js';\n\nvar hasBuffer = typeof Buffer !== 'undefined';\ntry {\n  if (hasBuffer && new Buffer('a').toString('base64') !== 'YQ==')\n    hasBuffer = false;\n}\ncatch (e) {\n  hasBuffer = false;\n}\n\nvar sourceMapPrefix = '\\n//# sourceMapping' + 'URL=data:application/json;base64,';\nfunction inlineSourceMap (sourceMapString) {\n  if (hasBuffer)\n    return sourceMapPrefix + new Buffer(sourceMapString).toString('base64');\n  else if (typeof btoa !== 'undefined')\n    return sourceMapPrefix + btoa(unescape(encodeURIComponent(sourceMapString)));\n  else\n    return '';\n}\n\nfunction getSource(source, sourceMap, address, wrap) {\n  var lastLineIndex = source.lastIndexOf('\\n');\n\n  if (sourceMap) {\n    if (typeof sourceMap != 'object')\n      throw new TypeError('load.metadata.sourceMap must be set to an object.');\n\n    sourceMap = JSON.stringify(sourceMap);\n  }\n\n  return (wrap ? '(function(System, SystemJS) {' : '') + source + (wrap ? '\\n})(System, System);' : '')\n      // adds the sourceURL comment if not already present\n      + (source.substr(lastLineIndex, 15) != '\\n//# sourceURL='\n        ? '\\n//# sourceURL=' + address + (sourceMap ? '!transpiled' : '') : '')\n      // add sourceMappingURL if load.metadata.sourceMap is set\n      + (sourceMap && inlineSourceMap(sourceMap) || '');\n}\n\n// script execution via injecting a script tag into the page\n// this allows CSP nonce to be set for CSP environments\nvar head;\nfunction scriptExec(loader, source, sourceMap, address, nonce) {\n  if (!head)\n    head = document.head || document.body || document.documentElement;\n\n  var script = document.createElement('script');\n  script.text = getSource(source, sourceMap, address, false);\n  var onerror = window.onerror;\n  var e;\n  window.onerror = function(_e) {\n    e = addToError(_e, 'Evaluating ' + address);\n    if (onerror)\n      onerror.apply(this, arguments);\n  }\n  preExec(loader);\n\n  if (nonce)\n    script.setAttribute('nonce', nonce);\n\n  head.appendChild(script);\n  head.removeChild(script);\n  postExec();\n  window.onerror = onerror;\n  if (e)\n    return e;\n}\n\nvar vm;\nvar useVm;\n\nvar curSystem;\n\nvar callCounter = 0;\nfunction preExec (loader) {\n  if (callCounter++ == 0)\n    curSystem = global.System;\n  global.System = global.SystemJS = loader;\n}\nfunction postExec () {\n  if (--callCounter == 0)\n    global.System = global.SystemJS = curSystem;\n}\n\nvar supportsScriptExec = false;\nif (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {\n  if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\\.js/)))\n    supportsScriptExec = true;\n}\n\nexport function evaluate (loader, source, sourceMap, address, integrity, nonce, noWrap) {\n  if (!source)\n    return;\n  if (nonce && supportsScriptExec)\n    return scriptExec(loader, source, sourceMap, address, nonce);\n  try {\n    preExec(loader);\n    // global scoped eval for node (avoids require scope leak)\n    if (!vm && loader._nodeRequire) {\n      vm = loader._nodeRequire('vm');\n      useVm = vm.runInThisContext(\"typeof System !== 'undefined' && System\") === loader;\n    }\n    if (useVm)\n      vm.runInThisContext(getSource(source, sourceMap, address, !noWrap), { filename: address + (sourceMap ? '!transpiled' : '') });\n    else\n      (0, eval)(getSource(source, sourceMap, address, !noWrap));\n    postExec();\n  }\n  catch (e) {\n    postExec();\n    return e;\n  }\n}\n","\nimport { isWindows, global, readMemberExpression, cjsRequireRegEx, noop } from './common.js';\n\nexport default function (loader) {\n  loader.set('@@cjs-helpers', loader.newModule({\n    requireResolve: requireResolve.bind(loader),\n    getPathVars: getPathVars\n  }));\n\n  loader.set('@@global-helpers', loader.newModule({\n    prepareGlobal: prepareGlobal\n  }));\n\n  /*\n    AMD-compatible require\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n  */\n  function require (names, callback, errback, referer) {\n    // in amd, first arg can be a config object... we just ignore\n    if (typeof names === 'object' && !(names instanceof Array))\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n    // amd require\n    if (typeof names === 'string' && typeof callback === 'function')\n      names = [names];\n    if (names instanceof Array) {\n      var dynamicRequires = [];\n      for (var i = 0; i < names.length; i++)\n        dynamicRequires.push(loader.import(names[i], referer));\n      Promise.all(dynamicRequires).then(function (modules) {\n        if (callback)\n          callback.apply(null, modules);\n      }, errback);\n    }\n\n    // commonjs require\n    else if (typeof names === 'string') {\n      var normalized = loader.decanonicalize(names, referer);\n      var module = loader.get(normalized);\n      if (!module)\n        throw new Error('Module not already loaded loading \"' + names + '\" as ' + normalized + (referer ? ' from \"' + referer + '\".' : '.'));\n      return '__useDefault' in module ? module.__useDefault : module;\n    }\n\n    else\n      throw new TypeError('Invalid require');\n  }\n\n  function define (name, deps, factory) {\n    if (typeof name !== 'string') {\n      factory = deps;\n      deps = name;\n      name = null;\n    }\n\n    if (!(deps instanceof Array)) {\n      factory = deps;\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\n    }\n\n    if (typeof factory !== 'function')\n      factory = (function (factory) {\n        return function() { return factory; }\n      })(factory);\n\n    if (!name) {\n      if (curMetaDeps) {\n        deps = deps.concat(curMetaDeps);\n        curMetaDeps = undefined;\n      }\n    }\n\n    // remove system dependencies\n    var requireIndex, exportsIndex, moduleIndex;\n\n    if ((requireIndex = deps.indexOf('require')) !== -1) {\n\n      deps.splice(requireIndex, 1);\n\n      // only trace cjs requires for non-named\n      // named defines assume the trace has already been done\n      if (!name)\n        deps = deps.concat(amdGetCJSDeps(factory.toString(), requireIndex));\n    }\n\n    if ((exportsIndex = deps.indexOf('exports')) !== -1)\n      deps.splice(exportsIndex, 1);\n\n    if ((moduleIndex = deps.indexOf('module')) !== -1)\n      deps.splice(moduleIndex, 1);\n\n    function execute (req, exports, module) {\n      var depValues = [];\n      for (var i = 0; i < deps.length; i++)\n        depValues.push(req(deps[i]));\n\n      module.uri = module.id;\n\n      module.config = noop;\n\n      // add back in system dependencies\n      if (moduleIndex !== -1)\n        depValues.splice(moduleIndex, 0, module);\n\n      if (exportsIndex !== -1)\n        depValues.splice(exportsIndex, 0, exports);\n\n      if (requireIndex !== -1) {\n        var contextualRequire = function (names, callback, errback) {\n          if (typeof names === 'string' && typeof callback !== 'function')\n            return req(names);\n          return require.call(loader, names, callback, errback, module.id);\n        };\n        contextualRequire.toUrl = function (name) {\n          return loader.normalizeSync(name, module.id);\n        };\n        depValues.splice(requireIndex, 0, contextualRequire);\n      }\n\n      // set global require to AMD require\n      var curRequire = global.require;\n      global.require = require;\n\n      var output = factory.apply(exportsIndex === -1 ? global : exports, depValues);\n\n      global.require = curRequire;\n\n      if (typeof output !== 'undefined')\n        module.exports = output;\n    }\n\n    // anonymous define\n    if (!name) {\n      loader.registerDynamic(deps, false, curEsModule ? wrapEsModuleExecute(execute) : execute);\n    }\n    else {\n      loader.registerDynamic(name, deps, false, execute);\n\n      // if we don't have any other defines,\n      // then let this be an anonymous define\n      // this is just to support single modules of the form:\n      // define('jquery')\n      // still loading anonymously\n      // because it is done widely enough to be useful\n      // as soon as there is more than one define, this gets removed though\n      if (lastNamedDefine) {\n        lastNamedDefine = undefined;\n        multipleNamedDefines = true;\n      }\n      else if (!multipleNamedDefines) {\n        lastNamedDefine = [deps, execute];\n      }\n    }\n  }\n  define.amd = {};\n\n  loader.amdDefine = define;\n  loader.amdRequire = require;\n}\n\n// CJS\nvar windowOrigin;\nif (typeof window !== 'undefined' && typeof document !== 'undefined' && window.location)\n  windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\nfunction stripOrigin(path) {\n  if (path.substr(0, 8) === 'file:///')\n    return path.substr(7 + !!isWindows);\n\n  if (windowOrigin && path.substr(0, windowOrigin.length) === windowOrigin)\n    return path.substr(windowOrigin.length);\n\n  return path;\n}\n\nexport function requireResolve (request, parentId) {\n  return stripOrigin(this.normalizeSync(request, parentId));\n}\n\nexport function getPathVars (moduleId) {\n  // remove any plugin syntax\n  var pluginIndex = moduleId.lastIndexOf('!');\n  var filename;\n  if (pluginIndex !== -1)\n    filename = moduleId.substr(0, pluginIndex);\n  else\n    filename = moduleId;\n\n  var dirname = filename.split('/');\n  dirname.pop();\n  dirname = dirname.join('/');\n\n  return {\n    filename: stripOrigin(filename),\n    dirname: stripOrigin(dirname)\n  };\n}\n\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\n// extract CJS dependencies from source text via regex static analysis\n// read require('x') statements not in comments or strings\nexport function getCJSDeps (source) {\n  cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n\n  // track string and comment locations for unminified source\n  var stringLocations = [], commentLocations = [];\n\n  function inLocation (locations, match) {\n    for (var i = 0; i < locations.length; i++)\n      if (locations[i][0] < match.index && locations[i][1] > match.index)\n        return true;\n    return false;\n  }\n\n  if (source.length / source.split('\\n').length < 200) {\n    while (match = stringRegEx.exec(source))\n      stringLocations.push([match.index, match.index + match[0].length]);\n\n    // TODO: track template literals here before comments\n\n    while (match = commentRegEx.exec(source)) {\n      // only track comments not starting in strings\n      if (!inLocation(stringLocations, match))\n        commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);\n    }\n  }\n\n  while (match = cjsRequireRegEx.exec(source)) {\n    // ensure we're not within a string or comment location\n    if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n      var dep = match[1].substr(1, match[1].length - 2);\n      // skip cases like require('\" + file + \"')\n      if (dep.match(/\"|'/))\n        continue;\n      deps.push(dep);\n    }\n  }\n\n  return deps;\n}\n\n// Global\n// bare minimum ignores\nvar ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external',\n  'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\n\nvar globalSnapshot;\nfunction globalIterator (globalName) {\n  if (ignoredGlobalProps.indexOf(globalName) !== -1)\n    return;\n  try {\n    var value = global[globalName];\n  }\n  catch (e) {\n    ignoredGlobalProps.push(globalName);\n  }\n  this(globalName, value);\n}\n\nexport function getGlobalValue (exports) {\n  if (typeof exports === 'string')\n    return readMemberExpression(exports, global);\n\n  if (!(exports instanceof Array))\n    throw new Error('Global exports must be a string or array.');\n\n  var globalValue = {};\n  for (var i = 0; i < exports.length; i++)\n    globalValue[exports[i].split('.').pop()] = readMemberExpression(exports[i], global);\n  return globalValue;\n}\n\nexport function prepareGlobal (moduleName, exports, globals, encapsulate) {\n  // disable module detection\n  var curDefine = global.define;\n\n  global.define = undefined;\n\n  // set globals\n  var oldGlobals;\n  if (globals) {\n    oldGlobals = {};\n    for (var g in globals) {\n      oldGlobals[g] = global[g];\n      global[g] = globals[g];\n    }\n  }\n\n  // store a complete copy of the global object in order to detect changes\n  if (!exports) {\n    globalSnapshot = {};\n\n    Object.keys(global).forEach(globalIterator, function (name, value) {\n      globalSnapshot[name] = value;\n    });\n  }\n\n  // return function to retrieve global\n  return function () {\n    var globalValue = exports ? getGlobalValue(exports) : {};\n\n    var singleGlobal;\n    var multipleExports = !!exports;\n\n    if (!exports || encapsulate)\n      Object.keys(global).forEach(globalIterator, function (name, value) {\n        if (globalSnapshot[name] === value)\n          return;\n        if (value === undefined)\n          return;\n\n        // allow global encapsulation where globals are removed\n        if (encapsulate)\n          global[name] = undefined;\n\n        if (!exports) {\n          globalValue[name] = value;\n\n          if (singleGlobal !== undefined) {\n            if (!multipleExports && singleGlobal !== value)\n              multipleExports = true;\n          }\n          else {\n            singleGlobal = value;\n          }\n        }\n      });\n\n    globalValue = multipleExports ? globalValue : singleGlobal;\n\n    // revert globals\n    if (oldGlobals) {\n      for (var g in oldGlobals)\n        global[g] = oldGlobals[g];\n    }\n    global.define = curDefine;\n\n    return globalValue;\n  };\n}\n\n// AMD\nvar cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\nvar cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\nvar fnBracketRegEx = /\\(([^\\)]*)\\)/;\nvar wsRegEx = /^\\s+|\\s+$/g;\n\nvar requireRegExs = {};\n\nfunction amdGetCJSDeps(source, requireIndex) {\n\n  // remove comments\n  source = source.replace(commentRegEx, '');\n\n  // determine the require alias\n  var params = source.match(fnBracketRegEx);\n  var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n  // find or generate the regex for this requireAlias\n  var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n  requireRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n  while (match = requireRegEx.exec(source))\n    deps.push(match[2] || match[3]);\n\n  return deps;\n}\n\nfunction wrapEsModuleExecute (execute) {\n  return function (require, exports, module) {\n    execute(require, exports, module);\n    exports = module.exports;\n    if ((typeof exports === 'object' || typeof exports === 'function') && !('__esModule' in exports))\n      Object.defineProperty(module.exports, '__esModule', {\n        value: true\n      });\n  };\n}\n\n// generate anonymous define from singular named define\nvar multipleNamedDefines = false;\nvar lastNamedDefine;\nvar curMetaDeps;\nvar curEsModule = false;\nexport function clearLastDefine (metaDeps, esModule) {\n  curMetaDeps = metaDeps;\n  curEsModule = esModule;\n  lastNamedDefine = undefined;\n  multipleNamedDefines = false;\n}\nexport function registerLastDefine (loader) {\n  if (lastNamedDefine)\n    loader.registerDynamic(curMetaDeps ? lastNamedDefine[0].concat(curMetaDeps) : lastNamedDefine[0],\n        false, curEsModule ? wrapEsModuleExecute(lastNamedDefine[1]) : lastNamedDefine[1]);\n\n  // bundles are an empty module\n  else if (multipleNamedDefines)\n    loader.registerDynamic([], false, noop);\n}\n","import { scriptLoad, isBrowser, isWorker, global, cjsRequireRegEx, addToError, loadNodeModule,\n    warn, CONFIG, METADATA, emptyModule, protectedCreateNamespace, resolvedPromise, preloadScript, checkInstantiateWasm } from './common.js';\nimport { evaluate } from './evaluate.js';\nimport fetch from './fetch.js';\nimport { getGlobalValue, getCJSDeps, requireResolve, getPathVars, prepareGlobal, clearLastDefine, registerLastDefine } from './format-helpers.js';\n\nvar supportsScriptLoad = (isBrowser || isWorker) && typeof navigator !== 'undefined' && navigator.userAgent && !navigator.userAgent.match(/MSIE (9|10).0/);\n\n// include the node require since we're overriding it\nexport var nodeRequire;\nif (typeof require !== 'undefined' && typeof process !== 'undefined' && !process.browser)\n  nodeRequire = require;\n\nfunction setMetaEsModule (metadata, moduleValue) {\n  if (metadata.load.esModule && (typeof moduleValue === 'object' || typeof moduleValue === 'function') &&\n      !('__esModule' in moduleValue))\n    Object.defineProperty(moduleValue, '__esModule', {\n      value: true\n    });\n}\n\nexport function instantiate (key, processAnonRegister) {\n  var loader = this;\n  var config = this[CONFIG];\n  // first do bundles and depCache\n  return (loadBundlesAndDepCache(config, this, key) || resolvedPromise)\n  .then(function () {\n    if (processAnonRegister())\n      return;\n\n    var metadata = loader[METADATA][key];\n\n    // node module loading\n    if (key.substr(0, 6) === '@node/') {\n      if (!loader._nodeRequire)\n        throw new TypeError('Error loading ' + key + '. Can only load node core modules in Node.');\n      loader.registerDynamic([], false, function () {\n        return loadNodeModule.call(loader, key.substr(6), loader.baseURL);\n      });\n      processAnonRegister();\n      return;\n    }\n\n    if (metadata.load.scriptLoad ) {\n      if (metadata.load.pluginKey || !supportsScriptLoad) {\n        metadata.load.scriptLoad = false;\n        warn.call(config, 'scriptLoad not supported for \"' + key + '\"');\n      }\n    }\n    else if (metadata.load.scriptLoad !== false && !metadata.load.pluginKey && supportsScriptLoad) {\n      // auto script load AMD, global without deps\n      if (!metadata.load.deps && !metadata.load.globals &&\n          (metadata.load.format === 'system' || metadata.load.format === 'register' || metadata.load.format === 'global' && metadata.load.exports))\n        metadata.load.scriptLoad = true;\n    }\n\n    // fetch / translate / instantiate pipeline\n    if (!metadata.load.scriptLoad)\n      return initializePlugin(loader, key, metadata)\n      .then(function () {\n        return runFetchPipeline(loader, key, metadata, processAnonRegister, config.wasm);\n      })\n\n    // just script loading\n    return new Promise(function (resolve, reject) {\n      if (metadata.load.format === 'amd' && global.define !== loader.amdDefine)\n        throw new Error('Loading AMD with scriptLoad requires setting the global `' + globalName + '.define = SystemJS.amdDefine`');\n\n      scriptLoad(key, metadata.load.crossOrigin, metadata.load.integrity, function () {\n        if (!processAnonRegister()) {\n          metadata.load.format = 'global';\n          var globalValue = metadata.load.exports && getGlobalValue(metadata.load.exports);\n          loader.registerDynamic([], false, function () {\n            setMetaEsModule(metadata, globalValue);\n            return globalValue;\n          });\n          processAnonRegister();\n        }\n\n        resolve();\n      }, reject);\n    });\n  })\n  .then(function (instantiated) {\n    delete loader[METADATA][key];\n    return instantiated;\n  });\n};\n\nfunction initializePlugin (loader, key, metadata) {\n  if (!metadata.pluginKey)\n    return resolvedPromise;\n\n  return loader.import(metadata.pluginKey).then(function (plugin) {\n    metadata.pluginModule = plugin;\n    metadata.pluginLoad = {\n      name: key,\n      address: metadata.pluginArgument,\n      source: undefined,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n  });\n}\n\nfunction loadBundlesAndDepCache (config, loader, key) {\n  // load direct deps, in turn will pick up their trace trees\n  var deps = config.depCache[key];\n  if (deps) {\n    for (var i = 0; i < deps.length; i++)\n      loader.normalize(deps[i], key).then(preloadScript);\n  }\n  else {\n    var matched = false;\n    for (var b in config.bundles) {\n      for (var i = 0; i < config.bundles[b].length; i++) {\n        var curModule = config.bundles[b][i];\n\n        if (curModule === key) {\n          matched = true;\n          break;\n        }\n\n        // wildcard in bundles includes / boundaries\n        if (curModule.indexOf('*') !== -1) {\n          var parts = curModule.split('*');\n          if (parts.length !== 2) {\n            config.bundles[b].splice(i--, 1);\n            continue;\n          }\n\n          if (key.substr(0, parts[0].length) === parts[0] &&\n              key.substr(key.length - parts[1].length, parts[1].length) === parts[1]) {\n            matched = true;\n            break;\n          }\n        }\n      }\n\n      if (matched)\n        return loader.import(b);\n    }\n  }\n}\n\nfunction runFetchPipeline (loader, key, metadata, processAnonRegister, wasm) {\n  if (metadata.load.exports && !metadata.load.format)\n    metadata.load.format = 'global';\n\n  return resolvedPromise\n\n  // locate\n  .then(function () {\n    if (!metadata.pluginModule || !metadata.pluginModule.locate)\n      return;\n\n    return Promise.resolve(metadata.pluginModule.locate.call(loader, metadata.pluginLoad))\n    .then(function (address) {\n      if (address)\n        metadata.pluginLoad.address = address;\n    });\n  })\n\n  // fetch\n  .then(function () {\n    if (!metadata.pluginModule)\n      return fetch(key, metadata.load.authorization, metadata.load.integrity, wasm);\n\n    wasm = false;\n\n    if (!metadata.pluginModule.fetch)\n      return fetch(metadata.pluginLoad.address, metadata.load.authorization, metadata.load.integrity, false);\n\n    return metadata.pluginModule.fetch.call(loader, metadata.pluginLoad, function (load) {\n      return fetch(load.address, metadata.load.authorization, metadata.load.integrity, false);\n    });\n  })\n\n  .then(function (fetched) {\n    // fetch is already a utf-8 string if not doing wasm detection\n    if (!wasm || typeof fetched === 'string')\n      return translateAndInstantiate(loader, key, fetched, metadata, processAnonRegister);\n\n    return checkInstantiateWasm(loader, fetched, processAnonRegister)\n    .then(function (wasmInstantiated) {\n      if (wasmInstantiated)\n        return;\n\n      // not wasm -> convert buffer into utf-8 string to execute as a module\n      // TextDecoder compatibility matches WASM currently. Need to keep checking this.\n      // The TextDecoder interface is documented at http://encoding.spec.whatwg.org/#interface-textdecoder\n      var stringSource = isBrowser ? new TextDecoder('utf-8').decode(new Uint8Array(fetched)) : fetched.toString();\n      return translateAndInstantiate(loader, key, stringSource, metadata, processAnonRegister);\n    });\n  });\n}\n\nfunction translateAndInstantiate (loader, key, source, metadata, processAnonRegister) {\n  return Promise.resolve(source)\n  // translate\n  .then(function (source) {\n    if (metadata.load.format === 'detect')\n      metadata.load.format = undefined;\n\n    readMetaSyntax(source, metadata);\n\n    if (!metadata.pluginModule)\n      return source;\n\n    metadata.pluginLoad.source = source;\n\n    if (!metadata.pluginModule.translate)\n      return source;\n\n    return Promise.resolve(metadata.pluginModule.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (translated) {\n      if (metadata.load.sourceMap) {\n        if (typeof metadata.load.sourceMap !== 'object')\n          throw new Error('metadata.load.sourceMap must be set to an object.');\n        sanitizeSourceMap(metadata.pluginLoad.address, metadata.load.sourceMap);\n      }\n\n      if (typeof translated === 'string')\n        return translated;\n      else\n        return metadata.pluginLoad.source;\n    });\n  })\n  .then(function (source) {\n    if (!metadata.load.format && source.substring(0, 8) === '\"bundle\"') {\n      metadata.load.format = 'system';\n      return source;\n    }\n\n    if (metadata.load.format === 'register' || !metadata.load.format && detectRegisterFormat(source)) {\n      metadata.load.format = 'register';\n      return source;\n    }\n\n    if (metadata.load.format !== 'esm' && (metadata.load.format || !source.match(esmRegEx))) {\n      return source;\n    }\n\n    metadata.load.format = 'esm';\n    return transpile(loader, source, key, metadata, processAnonRegister);\n  })\n\n  // instantiate\n  .then(function (translated) {\n    if (typeof translated !== 'string' || !metadata.pluginModule || !metadata.pluginModule.instantiate)\n      return translated;\n\n    var calledInstantiate = false;\n    metadata.pluginLoad.source = translated;\n    return Promise.resolve(metadata.pluginModule.instantiate.call(loader, metadata.pluginLoad, function (load) {\n      translated = load.source;\n      metadata.load = load.metadata;\n      if (calledInstantiate)\n        throw new Error('Instantiate must only be called once.');\n      calledInstantiate = true;\n    }))\n    .then(function (result) {\n      if (calledInstantiate)\n        return translated;\n      return protectedCreateNamespace(result);\n    });\n  })\n  .then(function (source) {\n    // plugin instantiate result case\n    if (typeof source !== 'string')\n      return source;\n\n    if (!metadata.load.format)\n      metadata.load.format = detectLegacyFormat(source);\n\n    var registered = false;\n\n    switch (metadata.load.format) {\n      case 'esm':\n      case 'register':\n      case 'system':\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n        if (err)\n          throw err;\n        if (!processAnonRegister())\n          return emptyModule;\n        return;\n      break;\n\n      case 'json':\n        // warn.call(config, '\"json\" module format is deprecated.');\n        var parsed = JSON.parse(source);\n        return loader.newModule({ default: parsed, __useDefault: parsed });\n\n      case 'amd':\n        var curDefine = global.define;\n        global.define = loader.amdDefine;\n\n        clearLastDefine(metadata.load.deps, metadata.load.esModule);\n\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n\n        // if didn't register anonymously, use the last named define if only one\n        registered = processAnonRegister();\n        if (!registered) {\n          registerLastDefine(loader);\n          registered = processAnonRegister();\n        }\n\n        global.define = curDefine;\n\n        if (err)\n          throw err;\n      break;\n\n      case 'cjs':\n        var metaDeps = metadata.load.deps;\n        var deps = (metadata.load.deps || []).concat(metadata.load.cjsRequireDetection ? getCJSDeps(source) : []);\n\n        for (var g in metadata.load.globals)\n          if (metadata.load.globals[g])\n            deps.push(metadata.load.globals[g]);\n\n        loader.registerDynamic(deps, true, function (require, exports, module) {\n          require.resolve = function (key) {\n            return requireResolve.call(loader, key, module.id);\n          };\n          // support module.paths ish\n          module.paths = [];\n          module.require = require;\n\n          // ensure meta deps execute first\n          if (!metadata.load.cjsDeferDepsExecute && metaDeps)\n            for (var i = 0; i < metaDeps.length; i++)\n              require(metaDeps[i]);\n\n          var pathVars = getPathVars(module.id);\n          var __cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, global, global]\n          };\n\n          var cjsWrapper = \"(function (require, exports, module, __filename, __dirname, global, GLOBAL\";\n\n          // add metadata.globals to the wrapper arguments\n          if (metadata.load.globals)\n            for (var g in metadata.load.globals) {\n              __cjsWrapper.args.push(require(metadata.load.globals[g]));\n              cjsWrapper += \", \" + g;\n            }\n\n          // disable AMD detection\n          var define = global.define;\n          global.define = undefined;\n          global.__cjsWrapper = __cjsWrapper;\n\n          source = cjsWrapper + \") {\" + source.replace(hashBangRegEx, '') + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n          if (err)\n            throw err;\n\n          setMetaEsModule(metadata, exports);\n\n          global.__cjsWrapper = undefined;\n          global.define = define;\n        });\n        registered = processAnonRegister();\n      break;\n\n      case 'global':\n        var deps = metadata.load.deps || [];\n        for (var g in metadata.load.globals) {\n          var gl = metadata.load.globals[g];\n          if (gl)\n            deps.push(gl);\n        }\n\n        loader.registerDynamic(deps, false, function (require, exports, module) {\n          var globals;\n          if (metadata.load.globals) {\n            globals = {};\n            for (var g in metadata.load.globals)\n              if (metadata.load.globals[g])\n                globals[g] = require(metadata.load.globals[g]);\n          }\n\n          var exportName = metadata.load.exports;\n\n          if (exportName)\n            source += '\\n' + globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n          var retrieveGlobal = prepareGlobal(module.id, exportName, globals, metadata.load.encapsulateGlobal);\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, true);\n\n          if (err)\n            throw err;\n\n          var output = retrieveGlobal();\n          setMetaEsModule(metadata, output);\n          return output;\n        });\n        registered = processAnonRegister();\n      break;\n\n      default:\n        throw new TypeError('Unknown module format \"' + metadata.load.format + '\" for \"' + key + '\".' + (metadata.load.format === 'es6' ? ' Use \"esm\" instead here.' : ''));\n    }\n\n    if (!registered)\n      throw new Error('Module ' + key + ' detected as ' + metadata.load.format + ' but didn\\'t execute correctly.');\n  });\n}\n\nvar globalName = typeof self != 'undefined' ? 'self' : 'global';\n\n// good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\nexport var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s*(['\"]|(\\*\\s+as\\s+)?(?!type)([^\"'\\(\\)\\n; ]+)\\s*from\\s*['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s*(\\{|default|function|class|var|const|let|async\\s+function))/;\n\nvar leadingCommentAndMetaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\nexport function detectRegisterFormat(source) {\n  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) === 'System.register';\n}\n\n// AMD Module Format Detection RegEx\n// define([.., .., ..], ...)\n// define(varName); || define(function(require, exports) {}); || define({})\nvar amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n/// require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\nvar cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\nexport function detectLegacyFormat (source) {\n  if (source.match(amdRegEx))\n    return 'amd';\n\n  cjsExportsRegEx.lastIndex = 0;\n  cjsRequireRegEx.lastIndex = 0;\n  if (cjsRequireRegEx.exec(source) || cjsExportsRegEx.exec(source))\n    return 'cjs';\n\n  // global is the fallback format\n  return 'global';\n}\n\nfunction sanitizeSourceMap (address, sourceMap) {\n  var originalName = address.split('!')[0];\n\n  // force set the filename of the original file\n  if (!sourceMap.file || sourceMap.file == address)\n    sourceMap.file = originalName + '!transpiled';\n\n  // force set the sources list if only one source\n  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] === address))\n    sourceMap.sources = [originalName];\n}\n\nfunction transpile (loader, source, key, metadata, processAnonRegister) {\n  if (!loader.transpiler)\n    throw new TypeError('Unable to dynamically transpile ES module\\n   A loader plugin needs to be configured via `SystemJS.config({ transpiler: \\'transpiler-module\\' })`.');\n\n  // deps support for es transpile\n  if (metadata.load.deps) {\n    var depsPrefix = '';\n    for (var i = 0; i < metadata.load.deps.length; i++)\n      depsPrefix += 'import \"' + metadata.load.deps[i] + '\"; ';\n    source = depsPrefix + source;\n  }\n\n  // do transpilation\n  return loader.import.call(loader, loader.transpiler)\n  .then(function (transpiler) {\n    transpiler = transpiler.__useDefault || transpiler;\n\n    // translate hooks means this is a transpiler plugin instead of a raw implementation\n    if (!transpiler.translate)\n      throw new Error(loader.transpiler + ' is not a valid transpiler plugin.');\n\n    // if transpiler is the same as the plugin loader, then don't run twice\n    if (transpiler === metadata.pluginModule)\n      return source;\n\n    // convert the source map into an object for transpilation chaining\n    if (typeof metadata.load.sourceMap === 'string')\n      metadata.load.sourceMap = JSON.parse(metadata.load.sourceMap);\n\n    metadata.pluginLoad = metadata.pluginLoad || {\n      name: key,\n      address: key,\n      source: source,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n\n    return Promise.resolve(transpiler.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (source) {\n      // sanitize sourceMap if an object not a JSON string\n      var sourceMap = metadata.load.sourceMap;\n      if (sourceMap && typeof sourceMap === 'object')\n        sanitizeSourceMap(key, sourceMap);\n\n      if (metadata.load.format === 'esm' && detectRegisterFormat(source))\n        metadata.load.format = 'register';\n\n      return source;\n    });\n  }, function (err) {\n    throw addToError(err, 'Unable to load transpiler to transpile ' + key);\n  });\n}\n\n// detect any meta header syntax\n// only set if not already set\nvar metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\nvar metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\nfunction setMetaProperty(target, p, value) {\n  var pParts = p.split('.');\n  var curPart;\n  while (pParts.length > 1) {\n    curPart = pParts.shift();\n    target = target[curPart] = target[curPart] || {};\n  }\n  curPart = pParts.shift();\n  if (target[curPart] === undefined)\n    target[curPart] = value;\n}\n\nfunction readMetaSyntax (source, metadata) {\n  var meta = source.match(metaRegEx);\n  if (!meta)\n    return;\n\n  var metaParts = meta[0].match(metaPartRegEx);\n\n  for (var i = 0; i < metaParts.length; i++) {\n    var curPart = metaParts[i];\n    var len = curPart.length;\n\n    var firstChar = curPart.substr(0, 1);\n    if (curPart.substr(len - 1, 1) == ';')\n      len--;\n\n    if (firstChar != '\"' && firstChar != \"'\")\n      continue;\n\n    var metaString = curPart.substr(1, curPart.length - 3);\n    var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n    if (metaName) {\n      var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n      if (metaName === 'deps')\n        metaName = 'deps[]';\n\n      if (metaName.substr(metaName.length - 2, 2) === '[]') {\n        metaName = metaName.substr(0, metaName.length - 2);\n        metadata.load[metaName] = metadata.load[metaName] || [];\n        metadata.load[metaName].push(metaValue);\n      }\n      // \"use strict\" is not meta\n      else if (metaName !== 'use') {\n        setMetaProperty(metadata.load, metaName, metaValue);\n      }\n    }\n    else {\n      metadata.load[metaString] = true;\n    }\n  }\n}\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { warn, isBrowser, global, baseURI, CONFIG, METADATA, ModuleNamespace, emptyModule, isModule } from './common.js';\n\nimport { getConfig, getConfigItem, setConfig } from './config.js';\nimport { decanonicalize, normalize, normalizeSync } from './resolve.js';\nimport { instantiate, nodeRequire } from './instantiate.js';\nimport formatHelpers from './format-helpers.js';\n\nexport default SystemJSLoader;\n\nvar scriptSrc;\n\n// Promise detection and error message\nif (typeof Promise === 'undefined')\n  throw new Error('SystemJS needs a Promise polyfill.');\n\nif (typeof document !== 'undefined') {\n  var scripts = document.getElementsByTagName('script');\n  var curScript = scripts[scripts.length - 1];\n  if (document.currentScript && (curScript.defer || curScript.async))\n    curScript = document.currentScript;\n\n  scriptSrc = curScript && curScript.src;\n}\n// worker\nelse if (typeof importScripts !== 'undefined') {\n  try {\n    throw new Error('_');\n  }\n  catch (e) {\n    e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n      scriptSrc = url;\n    });\n  }\n}\n// node\nelse if (typeof __filename !== 'undefined') {\n  scriptSrc = __filename;\n}\n\nfunction SystemJSLoader () {\n  RegisterLoader.call(this);\n\n  // NB deprecate\n  this._loader = {};\n\n  // internal metadata store\n  this[METADATA] = {};\n\n  // internal configuration\n  this[CONFIG] = {\n    baseURL: baseURI,\n    paths: {},\n\n    packageConfigPaths: [],\n    packageConfigKeys: [],\n    map: {},\n    packages: {},\n    depCache: {},\n    meta: {},\n    bundles: {},\n\n    production: false,\n\n    transpiler: undefined,\n    loadedBundles: {},\n\n    // global behaviour flags\n    warnings: false,\n    pluginFirst: false,\n\n    // enable wasm loading and detection when supported\n    wasm: false\n  };\n\n  // make the location of the system.js script accessible (if any)\n  this.scriptSrc = scriptSrc;\n\n  this._nodeRequire = nodeRequire;\n\n  // support the empty module, as a concept\n  this.registry.set('@empty', emptyModule);\n\n  setProduction.call(this, false, false);\n\n  // add module format helpers\n  formatHelpers(this);\n}\n\nexport var envModule;\nexport function setProduction (isProduction, isBuilder) {\n  this[CONFIG].production = isProduction;\n  this.registry.set('@system-env', envModule = this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    production: !isBuilder && isProduction,\n    dev: isBuilder || !isProduction,\n    build: isBuilder,\n    'default': true\n  }));\n}\n\nSystemJSLoader.prototype = Object.create(RegisterLoader.prototype);\n\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\n// NB deprecate normalize\nSystemJSLoader.prototype[SystemJSLoader.resolve = RegisterLoader.resolve] = SystemJSLoader.prototype.normalize = normalize;\n\nSystemJSLoader.prototype.load = function (key, parentKey) {\n  warn.call(this[CONFIG], 'System.load is deprecated.');\n  return this.import(key, parentKey);\n};\n\n// NB deprecate decanonicalize, normalizeSync\nSystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.resolveSync = normalizeSync;\n\nSystemJSLoader.prototype[SystemJSLoader.instantiate = RegisterLoader.instantiate] = instantiate;\n\nSystemJSLoader.prototype.config = setConfig;\nSystemJSLoader.prototype.getConfig = getConfig;\n\nSystemJSLoader.prototype.global = global;\n\nSystemJSLoader.prototype.import = function () {\n  return RegisterLoader.prototype.import.apply(this, arguments)\n  .then(function (m) {\n    return '__useDefault' in m ? m.__useDefault : m;\n  });\n};\n\nexport var configNames = ['baseURL', 'map', 'paths', 'packages', 'packageConfigPaths', 'depCache', 'meta', 'bundles', 'transpiler', 'warnings', 'pluginFirst', 'production', 'wasm'];\n\nvar hasProxy = typeof Proxy !== 'undefined';\nfor (var i = 0; i < configNames.length; i++) (function (configName) {\n  Object.defineProperty(SystemJSLoader.prototype, configName, {\n    get: function () {\n      var cfg = getConfigItem(this[CONFIG], configName);\n\n      if (hasProxy && typeof cfg === 'object')\n        cfg = new Proxy(cfg, {\n          set: function (target, option) {\n            throw new Error('Cannot set SystemJS.' + configName + '[\"' + option + '\"] directly. Use SystemJS.config({ ' + configName + ': { \"' + option + '\": ... } }) rather.');\n          }\n        });\n\n      //if (typeof cfg === 'object')\n      //  warn.call(this[CONFIG], 'Referencing `SystemJS.' + configName + '` is deprecated. Use the config getter `SystemJS.getConfig(\\'' + configName + '\\')`');\n      return cfg;\n    },\n    set: function (name) {\n      throw new Error('Setting `SystemJS.' + configName + '` directly is no longer supported. Use `SystemJS.config({ ' + configName + ': ... })`.');\n    }\n  });\n})(configNames[i]);\n\n/*\n * Backwards-compatible registry API, to be deprecated\n */\nfunction registryWarn(loader, method) {\n  warn.call(loader[CONFIG], 'SystemJS.' + method + ' is deprecated for SystemJS.registry.' + method);\n}\nSystemJSLoader.prototype.delete = function (key) {\n  registryWarn(this, 'delete');\n  return this.registry.delete(key);\n};\nSystemJSLoader.prototype.get = function (key) {\n  registryWarn(this, 'get');\n  return this.registry.get(key);\n};\nSystemJSLoader.prototype.has = function (key) {\n  registryWarn(this, 'has');\n  return this.registry.has(key);\n};\nSystemJSLoader.prototype.set = function (key, module) {\n  registryWarn(this, 'set');\n  return this.registry.set(key, module);\n};\nSystemJSLoader.prototype.newModule = function (bindings) {\n  return new ModuleNamespace(bindings);\n};\nSystemJSLoader.prototype.isModule = isModule;\n\n// ensure System.register and System.registerDynamic decanonicalize\nSystemJSLoader.prototype.register = function (key, deps, declare) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.register.call(this, key, deps, declare);\n};\n\nSystemJSLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.registerDynamic.call(this, key, deps, executingRequire, execute);\n};\n","import { global, isBrowser, isWorker } from './common.js';\nimport SystemJSLoader from './systemjs-loader.js';\n\nSystemJSLoader.prototype.version = VERSION;\n\nvar System = new SystemJSLoader();\n\n// only set the global System on the global in browsers\nif (isBrowser || isWorker)\n  global.SystemJS = global.System = System;\n\nif (typeof module !== 'undefined' && module.exports)\n  module.exports = System;\n"]}